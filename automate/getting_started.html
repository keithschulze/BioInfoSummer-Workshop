<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>Automation of image analysis | BioInfoSummer: Image Analysis with Fiji/ImageJ</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../automate/automate.html" />
    
    
    <link rel="prev" href="../imagej/demo3.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="2" data-basepath=".." data-revision="1417579527110">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="imagej/intro.html">
            
                
                    <a href="../imagej/intro.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         ImageJ/Fiji
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="imagej/demo1.html">
            
                
                    <a href="../imagej/demo1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         Fluorescent stain measurement
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="imagej/demo2.html">
            
                
                    <a href="../imagej/demo2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         Cell counting and measurements
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="imagej/demo3.html">
            
                
                    <a href="../imagej/demo3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         Cell scoring
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter active" data-level="2" data-path="automate/getting_started.html">
            
                
                    <a href="../automate/getting_started.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Automation of image analysis
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="automate/automate.html">
            
                
                    <a href="../automate/automate.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         Automated cell scoring
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="automate/automate2.html">
            
                
                    <a href="../automate/automate2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Cleaning up
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="automate/automate3.html">
            
                
                    <a href="../automate/automate3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         Refinements
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="automate/results.html">
            
                
                    <a href="../automate/results.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         Pretty Results
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="scaling/scaling.html">
            
                
                    <a href="../scaling/scaling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Scaling up
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="scaling/files.html">
            
                
                    <a href="../scaling/files.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         Working with files
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >BioInfoSummer: Image Analysis with Fiji/ImageJ</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_11">
                    
                        <h1 id="why-automate-cell-scoring-revisited">Why automate? Cell scoring revisited</h1>
<p>Given a multichannel fluorescent image, we can:</p>
<ul>
<li>Segment and count total cells </li>
<li>Score the number/proportion of cell that are positive for 2 different markers</li>
</ul>
<hr>
<blockquote>
<p>&quot;That looks great! Now repeat it with 4 genotypes, 5 treatments, 3 concentrations, 3 fields of view and 5 replicates. Oh, and it could have a developmental effect, so maybe image it over 4 time points.&quot;</p>
</blockquote>
<p><strong>Assoc. Prof.   Idon&#39;tcareif   Youdon&#39;tsleep</strong></p>
<p><br>
That&#39;s 10,800 individual images to process.</p>
<p>Thankfully, computers are really good at automating repetitive tasks.</p>
<hr>
<p>Let&#39;s remind ourselves of the process for scoring cells manually:</p>
<ol>
<li>Split the DAPI, Ki67 and Ph3 channels, so we can work on them separately.</li>
<li>Segment DAPI:<ol>
<li>Threshold using Li AutoThreshold.</li>
<li>Watershed to split cells.</li>
</ol>
</li>
<li>Segment Ki67:<ol>
<li>Threshold using Li AutoThreshold.</li>
</ol>
</li>
<li>Segment Ph3:<ol>
<li>Threshold using Li AutoThreshold.</li>
</ol>
</li>
<li>Count cells in DAPI binary using Particle Analysis</li>
<li>Count cells in Ki67 binary using Particle Analysis</li>
<li>Count cells in Ph3 binary using Particle Analysis</li>
</ol>
<p>Note: We will introduce Geodesic reconstruction again later.</p>
<hr>
<h2 id="rapid-re-intro-to-python-programming">Rapid re-intro to Python programming</h2>
<p>Don&#39;t worry about the details, the aims are:</p>
<ul>
<li>Taste for the logic involved in automating an image analysis workflow.</li>
<li>Plan early for automation.</li>
</ul>
<pre><code class="lang-python"><span class="hljs-comment"># This is a comment</span>
<span class="hljs-string">"""So is this"""</span>

<span class="hljs-comment"># Basic Types and Variables</span>
variable = <span class="hljs-string">"This is a string of characters (or simply a string)."</span>
another_variable = <span class="hljs-string">"Hello, world!"</span>
five = <span class="hljs-number">5</span>
exact = <span class="hljs-number">10.23</span>
liar = <span class="hljs-keyword">True</span>

<span class="hljs-comment"># We can also define functions. Think of these like</span>
<span class="hljs-comment"># a mathematical function.</span>
<span class="hljs-comment"># e.g. y = xÂ²</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">square</span><span class="hljs-params">(x)</span>:</span>
    <span class="hljs-keyword">return</span> x*x

y = square(<span class="hljs-number">2</span>)
<span class="hljs-keyword">print</span> y                 <span class="hljs-comment"># outputs 4</span>

<span class="hljs-comment"># It doesn't have to be mathematical though</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">say_hello</span><span class="hljs-params">(name)</span>:</span>
    <span class="hljs-keyword">print</span> <span class="hljs-string">"Hello, "</span> + name

say_hello(<span class="hljs-string">"john"</span>)         <span class="hljs-comment"># outputs: Hello, John</span>
</code></pre>
<p>We will also make use of many functions/tools that are defined in the ImageJ core libraries and its plugins:</p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> ij <span class="hljs-keyword">import</span> IJ, ImagePlus, ImageProcessor
<span class="hljs-keyword">from</span> ij.measure <span class="hljs-keyword">import</span> ResultsTable
<span class="hljs-keyword">from</span> ij.plugin <span class="hljs-keyword">import</span> ChannelSplitter
</code></pre>
<p>Admittedly, these are not very discoverable, but here are a couple useful resources to get you started:</p>
<ul>
<li><a href="http://rsb.info.nih.gov/ij/developer/index.html" target="_blank">Image developer documentation</a></li>
<li><a href="http://rsb.info.nih.gov/ij/developer/api/" target="_blank">ImageJ API documentation</a></li>
<li><a href="http://fiji.sc/Jython_Scripting" target="_blank">Fiji Jython scripting introduction</a></li>
</ul>
<h2 id="a-note-on-imageplus-and-imageprocessor">A note on ImagePlus and ImageProcessor</h2>
<p><a href="http://rsb.info.nih.gov/ij/developer/api/ij/ImagePlus.html" target="_blank">ImagePlus</a> and <a href="http://rsb.info.nih.gov/ij/developer/api/ij/process/ImageProcessor.html" target="_blank">ImageProcessor</a> are very important data abstractions i.e., this is how images are represented in ImageJ. </p>
<p>ImagePlus:</p>
<ul>
<li>Underlying programmatical structure used to represent a multi-dimensional image in ImageJ.</li>
<li>Hold important information like the size of each dimension, bit-depth of pixels, calibrations, metadata and much more.</li>
<li>Pixel data for each plane of the image is store in an ImageProcessor.</li>
</ul>
<p>ImageProcessor:</p>
<ul>
<li>Has functions for accessing and manipulating actual pixel data for a particular image plane.</li>
</ul>
<p>Don&#39;t worry if this is not immediately clear, just understand that underlying the images you see in the ImageJ user interface is an ImagePlus and that each image plane has an ImageProcessor.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../imagej/demo3.html" class="navigation navigation-prev " aria-label="Previous page: Cell scoring"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../automate/automate.html" class="navigation navigation-next " aria-label="Next page: Automated cell scoring"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
