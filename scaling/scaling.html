<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>Scaling up | BioInfoSummer: Image Analysis with Fiji/ImageJ</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../scaling/files.html" />
    
    
    <link rel="prev" href="../automate/results.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="3" data-basepath=".." data-revision="1416793509896">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="imagej/intro.html">
            
                
                    <a href="../imagej/intro.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         ImageJ/Fiji
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="imagej/demo1.html">
            
                
                    <a href="../imagej/demo1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         Fluorescent stain measurement
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="imagej/demo2.html">
            
                
                    <a href="../imagej/demo2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         Cell counting and measurements
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="imagej/demo3.html">
            
                
                    <a href="../imagej/demo3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         Cell scoring
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="automate/getting_started.html">
            
                
                    <a href="../automate/getting_started.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Automation of image analysis
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="automate/automate.html">
            
                
                    <a href="../automate/automate.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         Automated cell scoring
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="automate/automate2.html">
            
                
                    <a href="../automate/automate2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Cleaning up
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="automate/automate3.html">
            
                
                    <a href="../automate/automate3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         Refinements
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="automate/results.html">
            
                
                    <a href="../automate/results.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         Pretty Results
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter active" data-level="3" data-path="scaling/scaling.html">
            
                
                    <a href="../scaling/scaling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Scaling up
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="scaling/files.html">
            
                
                    <a href="../scaling/files.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         Working with files
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >BioInfoSummer: Image Analysis with Fiji/ImageJ</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_35">
                    
                        <h1 id="looping-the-analysis-procedure">Looping the analysis procedure</h1>
<p>Let&#39;s put in the code to run our analysis over a folder full of images.</p>
<p>Break down the requirements:</p>
<ol>
<li>Ask user for a folder of images to analyse.</li>
<li>Query that folder to get a list of files to analyse.</li>
<li>Filter the list of files to exclude those that are not supported.</li>
<li>For each file in our list:<ol>
<li>Open the image</li>
<li>Analyse the image using the routine we setup previously.</li>
<li>Add results as a new line in the result table.</li>
</ol>
</li>
</ol>
<p>Note: We might also like to include some code to save the segmented binary images, so that users can check the outputs of our script. For that we need to ask the user for an output folder and get image to save the segmented binary images into that folder.</p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-comment"># Get the user to choose a directory of images to analyse</span>
    dc = DirectoryChooser(<span class="hljs-string">"Pick a folder of images to analyse..."</span>)
    img_dir = dc.getDirectory()

    <span class="hljs-keyword">if</span> img_dir <span class="hljs-keyword">is</span> <span class="hljs-keyword">None</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">"No directory selected."</span>
        <span class="hljs-keyword">return</span>

    <span class="hljs-comment"># Get the users to specify an output directory</span>
    od = DirectoryChooser(<span class="hljs-string">"Pick an output folder..."</span>)
    output_dir = od.getDirectory()

    <span class="hljs-comment"># Get a list of files from the input directory</span>
    file_list = os.listdir(img_dir)
    file_list = filter(accept, file_list)

    results = ResultsTable()

    <span class="hljs-comment"># Iterate through the list of files</span>
    <span class="hljs-keyword">for</span> fp <span class="hljs-keyword">in</span> file_list:
        image = IJ.openImage(os.path.join(img_dir, fp))

        <span class="hljs-comment"># ... code that analyses image from v4 of the script</span>
        <span class="hljs-comment"># ...</span>
        <span class="hljs-comment"># ...</span>

    results.show(<span class="hljs-string">"Results"</span>)

run()
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../automate/results.html" class="navigation navigation-prev " aria-label="Previous page: Pretty Results"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../scaling/files.html" class="navigation navigation-next " aria-label="Next page: Working with files"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
